# [RHEL 9] 개발 환경 설정

*최초 작성일: 2022년 06월 07일*  
*최근 수정일: 2022년 08월 15일*

## 요약

RHEL 9.0 초기 환경 설정 후, 개발 환경 설정을 적용합니다.

## 설명

일관성 있는 개발 환경으로 버전 호환성 등 문제를 최소화하고 효율적으로 개발을 시작할 수 있습니다.

## 솔루션

*RHEL 9.0 기본 설정 후 작성하였습니다.*

### **1. ToolChain**

### uefi vs bios

<https://access.redhat.com/solutions/3781221>
<https://fedoraproject.org/wiki/Changes/UnifyGrubConfig>

### make windows the default boot

<https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-working_with_the_grub_2_boot_loader#sec-Changing_the_Default_Boot_Entry>  

    "To force a system to always use a particular menu entry, use the menu entry name as the key to the GRUB_DEFAULT directive in the /etc/default/grub file. To list the available menu entries, run the following command as root:"

<https://bugzilla.redhat.com/show_bug.cgi?id=1969362>  
grubby is the recommended tool for managing kernels/grubs  
However, if we alter for example, default-index=0, if we install a new kernel, that new kernel will be our next default. What we want is a persistent change to Windows boot.

From red hat:  

    Note that the position of a menu entry in the list is denoted by a number starting with zero; therefore, in the example above, the third entry will be loaded. This value will be overwritten by the name of the next kernel to be installed.

So, we will force `GRUB_DEFAULT`.  

1. List available menu entries:

    > sudo awk -F\' '$1=="menuentry " {print $2}' /etc/grub2.cfg  

2. Copy the desired Windows entry

3. open and edit the default value for /etc/default/grub

    > sudo nano /etc/default/grub

    in quotations:
    > GRUB_DEFAULT="Windows Boot Manager (on /dev/nvme0n1p1)"

4. rebuild `grub.cfg`

    `/boot/efi/EFI/redhat/grub.cfg` is now apparently a symbolic link to the `/boot/grub2/grub.cfg` file.  
    Run:
    > sudo grub2-mkconfig -o /boot/grub2/grub.cfg

5. reboot and confirm

    <https://access.redhat.com/solutions/6668601>  
    > sudo grubby --info DEFAULT

    use above command to confirm change to Windows default has been applied successfully

### Configure the network settings  (static IP, DNS) on the server

    Cloudflare (1.1.1.1), Google Public DNS (8.8.8.8)
    (https://developers.cloudflare.com/1.1.1.1/setting-up-1.1.1.1/linux)
    (https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking)

1. Get device name, connection name, status, info

    > sudo nmcli

2. Get device, connection summary

    > sudo nmcli device

3. Disable auto-dns

    > sudo nmcli connection modify $connectionName ipv4.ignore-auto-dns yes  
    > sudo nmcli connection modify $connectionName ipv6.ignore-auto-dns yes

4. Set ipv4.dns and ipv6.dns

    > sudo nmcli connection modify $connectionName ipv4.dns "1.1.1.1 1.0.0.1"  
    > sudo nmcli connection modify $connectionName ipv6.dns "2606:4700:4700::1111 2606:4700:4700::1001"

5. Deactivate and reactivate connection

    > sudo nmcli connection down $connectionName  
    > sudo nmcli connection up $connectionName

6. Confirm changes
    > sudo nmcli

### epel-release install

> sudo dnf install -y <https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm>

    source: <https://docs.nvidia.com/datacenter/tesla/tesla-installation-notes/index.html#rhel8>

### remove firefox

> sudo dnf remove firefox*

### install chromium, p7zip

> sudo dnf install chromium  
> sudo dnf install p7zip p7zip-plugins

### install nvidia driver

enable RHEL8 AppStream, RHEL8 BaseOS and RHEL8 CRB

    subscription-manager repos --enable=rhel-8-for-x86_64-appstream-rpms  
    subscription-manager repos --enable=rhel-8-for-x86_64-baseos-rpms  
    subscription-manager repos --enable=codeready-builder-for-rhel-8-x86_64-rpms  

add cuda  

    sudo dnf config-manager --add-repo=https://developer.download.nvidia.com/compute/cuda/repos/rhel9/x86_64/cuda-rhel9.repo

list what are available to install

    sudo dnf module list nvidia-driver

install driver module

*refer to support matrix, production branch*  
    sudo dnf module install nvidia-driver:515-open

### flatpak

<https://docs.flatpak.org/en/latest/using-flatpak.html>

    flatpak remote-add --user -if-not-exists flathub https://flathub.org/repo/flathub.comflatpakrepo

`--user` flag is needed to install repo and packages to user directory instead of system wide installation

Example:

    flatpak install flathub org.chromium.Chromium --user

since i want to use the system's development tools such as jdk, i will need to install vscode and other IDEs by NOT using flatpak (flatpak installs its own jdks)

### WHAT IS CUPS?**

### miniforge

<https://github.com/conda-forge/miniforge>

    wget "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh"
    bash Mambaforge-$(uname)-$(uname -m).sh

close and re-open terminal  
create env

    conda create -n test_rhel python=3.7
    conda activate rhel_test

### OPENJDK

new-features  
Java implementations in RHEL 9  
The RHEL 9 AppStream repository includes:  

rhel  
<<https://access.redhat.com/documentation/en-us/openjdk/17/html/installing_and_using_openjdk_17_on_rhel/installing-openjdk11-on-rhel8_openjdk#installing-multiple-major-versions-of-jdk11-on-rhel-using-yum_openjdk>

windows  
<https://access.redhat.com/documentation/en-us/openjdk/17/html/installing_and_using_openjdk_17_for_windows/openjdk_for_windows_installation_options>

    java --version
    javac --version
    sudo dnf list java*
    sudo dnf install java-1.8.0-openjdk-devel
    sudo dnf install java-11-openjdk-devel
    sudo dnf install java-17-openjdk-devel

Configure:

    sudo update-alternatives --config "java"

### jetbrains toolbox

<https://www.jetbrains.com/help/idea/installation-guide.html#toolbox>
search for the phrase "You can use this shell script..." to automatically install the toolbox to /opt and it will create a sym link to `/usr/local/bin` directory.  
After installation, just run `jetbrains-toolbox`

### Android Studio

### pycharm

terminal, type:

    which conda

The above commmand does not work. Select from existing:

    /home/<user>/miniforge3/envs/<env_name>/bin/python

### ideaj

### default application

right click on a file > properties > open with > select application > set default

### keyboard

Settings > Keyboard > Customize shortcuts > Typing > Switch to next input source > \<your preferred keys> (Ctrl + Space)  

<https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/using_the_desktop_environment_in_rhel_8/assembly_enabling-chinese-japanese-or-korean-text-input_using-the-desktop-environment-in-rhel-8#proc_installing-input-method-engines_assembly_enabling-chinese-japanese-or-korean-text-input>

Install hangul:

    sudo dnf install ibus-hangul

Switch input:

    ibus-setup
    general > keyboard shortcuts > ... > ctrlspace
    input method > add > hangul > preferences > start in hangul mode
    hangul toggle key > \<user preference> (ctrl+space) > apply & okay

we  
*may need to deactivate conda*

*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*

### resources

* ssg-el7  
<http://redhatgov.io/>
* related documentation  
<https://htmlpreview.github.io/?https://github.com/isimluk/rhel8-stig-latest/blob/master/ssg-rhel8-guide-stig.html#xccdf_org.ssgproject.content_group_uefi>
* ssg-el7 related github, kickstart  
<https://github.com/RedHatGov/ssg-el7-kickstart/issues/62>
* redhat kickstart generator  
<https://access.redhat.com/labs/kickstartconfig/>
* rhel 9 advanced installtion + kickstart  
<https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/performing_an_advanced_rhel_installation/creating-kickstart-files_installing-rhel-as-an-experienced-user#creating-a-kickstart-file-by-performing-a-manual-installation_creating-kickstart-files>
* RHEL 9 변경 사항 가이드 (삼성)  
<https://post.naver.com/viewer/postView.naver?memberNo=36733075&volumeNo=33860490>
* CentOS 설치 가이드 예시  
<https://kogoza.tistory.com/entry/CentOS-8%EC%9D%84-%EC%84%A4%EC%B9%98%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-%EC%8A%A4%ED%81%AC%EB%A6%B0-%EC%83%B7%EC%9D%B4%EC%9E%88%EB%8A%94-%EB%8B%A8%EA%B3%84%EB%B3%84>
<https://www.linuxtechi.com/how-to-install-rhel-9-step-by-step/>
<https://awesomek.tistory.com/9>

### what i learned

> $ file /etc/grub2.cfg  
> /etc/grub2.cfg is symlink to /boot/grub2/grub.cfg

* efibootmgr  
check and delete unused entries  
<https://wiki.gentoo.org/wiki/Efibootmgr#Listing_boot_entries>
<https://www.linuxbabe.com/command-line/how-to-use-linux-efibootmgr-examples>

* Boot loader configuration files are unified across CPU architectures  
<https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/9.0_release_notes/new-features#enhancement_boot-loader>  
Configuration files for the GRUB boot loader are now stored in the /boot/grub2/ directory on all supported CPU architectures. The /boot/efi/EFI/redhat/grub.cfg file, which GRUB previously used on UEFI systems, is now a symbolic link to the /boot/grub2/grub.cfg file.
